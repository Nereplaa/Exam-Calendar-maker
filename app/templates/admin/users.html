{% extends 'base.html' %}

{% block title %}KullanÄ±cÄ±lar - Admin{% endblock %}

{% block content %}
<section class="admin-section">
    <div class="container">
        <!-- Sayfa BaÅŸlÄ±ÄŸÄ± -->
        <div class="page-header">
            <h1>ğŸ‘¥ KullanÄ±cÄ± YÃ¶netimi</h1>
        </div>

        <!-- KullanÄ±cÄ± Tablosu -->
        <div class="card">
            <table class="table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>KullanÄ±cÄ± AdÄ±</th>
                        <th>Ad Soyad</th>
                        <th>E-posta</th>
                        <th>Rol</th>
                        <th>BÃ¶lÃ¼m</th>
                        <th>Durum</th>
                        <th>Ä°ÅŸlemler</th>
                    </tr>
                </thead>
                <tbody>
                    {% for user in users %}
                    <tr>
                        <td>{{ user.id }}</td>
                        <td><strong>{{ user.username }}</strong></td>
                        <td>{{ user.full_name }}</td>
                        <td>{{ user.email }}</td>
                        <td>
                            {% if user.role == 'admin' %}
                            <span class="badge badge-primary">ğŸ‘‘ Admin</span>
                            {% elif user.role == 'bolum_yetkili' %}
                            <span class="badge">ğŸ›ï¸ BÃ¶lÃ¼m Yetkilisi</span>
                            {% elif user.role == 'hoca' %}
                            <span class="badge">ğŸ‘¨â€ğŸ« Hoca</span>
                            {% else %}
                            <span class="badge">ğŸ“ Ã–ÄŸrenci</span>
                            {% endif %}
                        </td>
                        <td>{{ user.department_name or '-' }}</td>
                        <td>
                            {% if user.is_active %}
                            <span class="badge badge-success">âœ“ Aktif</span>
                            {% else %}
                            <span class="badge badge-danger">âœ— Pasif</span>
                            {% endif %}
                        </td>
                        <td class="actions">
                            <!-- Rol DÃ¼zenle Butonu -->
                            <a href="{{ url_for('admin.user_edit', user_id=user.id) }}" class="btn btn-sm btn-edit">
                                âœï¸ Rol DÃ¼zenle</a>

                            {% if user.is_active %}
                            <a href="{{ url_for('admin.user_delete', user_id=user.id) }}" class="btn btn-sm btn-delete"
                                onclick="return confirm('Bu kullanÄ±cÄ±yÄ± pasif yapmak istediÄŸinize emin misiniz?')">
                                ğŸš« Pasif Yap</a>
                            {% else %}
                            <a href="{{ url_for('admin.user_activate', user_id=user.id) }}" class="btn btn-sm btn-edit">
                                âœ“ Aktif Yap</a>
                            {% endif %}
                        </td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="8" class="text-center">HenÃ¼z kullanÄ±cÄ± eklenmemiÅŸ.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <!-- Geri Butonu -->
        <div class="back-link">
            <a href="{{ url_for('auth.dashboard') }}">â† Panele DÃ¶n</a>
        </div>
    </div>
</section>
{% endblock %}