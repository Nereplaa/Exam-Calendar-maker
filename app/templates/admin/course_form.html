{% extends 'base.html' %}

{% block title %}{{ 'Ders DÃ¼zenle' if course else 'Yeni Ders' }} - Admin{% endblock %}

{% block content %}
<section class="admin-section">
    <div class="container">
        <div class="form-card">
            <!-- BaÅŸlÄ±k -->
            <div class="form-header">
                <h1>ğŸ“– {{ 'Ders DÃ¼zenle' if course else 'Yeni Ders Ekle' }}</h1>
            </div>

            <!-- Form -->
            <form method="POST" class="admin-form">
                <div class="form-row">
                    <!-- Ders Kodu -->
                    <div class="form-group">
                        <label for="code" class="form-label">Ders Kodu *</label>
                        <input type="text" id="code" name="code" class="form-control"
                            value="{{ course.code if course else '' }}" placeholder="Ã–rn: BM101" required>
                    </div>

                    <!-- Ders AdÄ± -->
                    <div class="form-group">
                        <label for="name" class="form-label">Ders AdÄ± *</label>
                        <input type="text" id="name" name="name" class="form-control"
                            value="{{ course.name if course else '' }}" placeholder="Ã–rn: Programlamaya GiriÅŸ" required>
                    </div>
                </div>

                <div class="form-row">
                    <!-- BÃ¶lÃ¼m SeÃ§imi -->
                    <div class="form-group">
                        <label for="department_id" class="form-label">BÃ¶lÃ¼m *</label>
                        <select id="department_id" name="department_id" class="form-control" required>
                            <option value="">-- BÃ¶lÃ¼m SeÃ§in --</option>
                            {% for dept in departments %}
                            <option value="{{ dept.id }}" {{ 'selected' if course and course.department_id==dept.id
                                else '' }}>
                                {{ dept.name }}
                            </option>
                            {% endfor %}
                        </select>
                    </div>

                    <!-- Ã–ÄŸretim Ãœyesi SeÃ§imi -->
                    <div class="form-group">
                        <label for="instructor_id" class="form-label">Ã–ÄŸretim Ãœyesi *</label>
                        <select id="instructor_id" name="instructor_id" class="form-control" required>
                            <option value="">-- Ã–ÄŸretim Ãœyesi SeÃ§in --</option>
                            {% for inst in instructors %}
                            <option value="{{ inst.id }}" {{ 'selected' if course and course.instructor_id==inst.id
                                else '' }}>
                                {{ inst.title }} {{ inst.name }}
                            </option>
                            {% endfor %}
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <!-- Ã–ÄŸrenci SayÄ±sÄ± -->
                    <div class="form-group">
                        <label for="student_count" class="form-label">Ã–ÄŸrenci SayÄ±sÄ±</label>
                        <input type="number" id="student_count" name="student_count" class="form-control"
                            value="{{ course.student_count if course else '0' }}" min="0">
                    </div>

                    <!-- SÄ±nav SÃ¼resi -->
                    <div class="form-group">
                        <label for="exam_duration" class="form-label">SÄ±nav SÃ¼resi (dakika)</label>
                        <select id="exam_duration" name="exam_duration" class="form-control">
                            <option value="30" {{ 'selected' if course and course.exam_duration==30 else '' }}>30 dakika
                            </option>
                            <option value="45" {{ 'selected' if course and course.exam_duration==45 else '' }}>45 dakika
                            </option>
                            <option value="60" {{ 'selected' if course and course.exam_duration==60 else '' }}>60 dakika
                            </option>
                            <option value="90" {{ 'selected' if course and course.exam_duration==90 else '' }}>90 dakika
                            </option>
                            <option value="120" {{ 'selected' if course and course.exam_duration==120 else '' }}>120
                                dakika</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <!-- SÄ±nav TÃ¼rÃ¼ -->
                    <div class="form-group">
                        <label for="exam_type" class="form-label">SÄ±nav TÃ¼rÃ¼</label>
                        <select id="exam_type" name="exam_type" class="form-control">
                            <option value="YazÄ±lÄ±" {{ 'selected' if course and course.exam_type=='YazÄ±lÄ±' else '' }}>
                                YazÄ±lÄ±</option>
                            <option value="Test" {{ 'selected' if course and course.exam_type=='Test' else '' }}>Test
                            </option>
                            <option value="Uygulama" {{ 'selected' if course and course.exam_type=='Uygulama' else ''
                                }}>Uygulama</option>
                            <option value="SÃ¶zlÃ¼" {{ 'selected' if course and course.exam_type=='SÃ¶zlÃ¼' else '' }}>SÃ¶zlÃ¼
                            </option>
                            <option value="Proje" {{ 'selected' if course and course.exam_type=='Proje' else '' }}>Proje
                            </option>
                        </select>
                    </div>
                </div>

                <!-- Ders Saatleri (HocanÄ±n MÃ¼saitliÄŸi Ä°Ã§in) -->
                <div class="form-section">
                    <h3 class="form-section-title">ğŸ“… Ders ProgramÄ±</h3>
                    <p class="form-section-desc">HocanÄ±n bu dersi verdiÄŸi gÃ¼n ve saat. SÄ±nav planlamasÄ±nda bu saatler
                        mÃ¼sait olmayan olarak iÅŸaretlenir.</p>

                    <div class="form-row">
                        <!-- Ders GÃ¼nÃ¼ -->
                        <div class="form-group">
                            <label for="day_of_week" class="form-label">Ders GÃ¼nÃ¼</label>
                            <select id="day_of_week" name="day_of_week" class="form-control">
                                <option value="">-- SeÃ§in (Opsiyonel) --</option>
                                <option value="Pazartesi" {{ 'selected' if course and course.day_of_week=='Pazartesi'
                                    else '' }}>Pazartesi</option>
                                <option value="SalÄ±" {{ 'selected' if course and course.day_of_week=='SalÄ±' else '' }}>
                                    SalÄ±</option>
                                <option value="Ã‡arÅŸamba" {{ 'selected' if course and course.day_of_week=='Ã‡arÅŸamba'
                                    else '' }}>Ã‡arÅŸamba</option>
                                <option value="PerÅŸembe" {{ 'selected' if course and course.day_of_week=='PerÅŸembe'
                                    else '' }}>PerÅŸembe</option>
                                <option value="Cuma" {{ 'selected' if course and course.day_of_week=='Cuma' else '' }}>
                                    Cuma</option>
                            </select>
                        </div>

                        <!-- Ders BaÅŸlangÄ±Ã§ Saati -->
                        <div class="form-group">
                            <label for="class_start_time" class="form-label">BaÅŸlangÄ±Ã§ Saati</label>
                            <input type="time" id="class_start_time" name="class_start_time" class="form-control"
                                value="{{ course.class_start_time if course and course.class_start_time else '' }}">
                        </div>

                        <!-- Ders BitiÅŸ Saati -->
                        <div class="form-group">
                            <label for="class_end_time" class="form-label">BitiÅŸ Saati</label>
                            <input type="time" id="class_end_time" name="class_end_time" class="form-control"
                                value="{{ course.class_end_time if course and course.class_end_time else '' }}">
                        </div>
                    </div>
                </div>

                <!-- Checkbox'lar -->
                <div class="form-group checkbox-group">
                    <label class="checkbox-label">
                        <input type="checkbox" name="needs_computer" {{ 'checked' if course and course.needs_computer
                            else '' }}>
                        <span>ğŸ’» Bilgisayar gerekli (Lab sÄ±navÄ±)</span>
                    </label>

                    <label class="checkbox-label">
                        <input type="checkbox" name="has_exam" {{ 'checked' if (course and course.has_exam) or not
                            course else '' }}>
                        <span>ğŸ“ Bu dersin sÄ±navÄ± var</span>
                    </label>
                </div>

                <!-- Butonlar -->
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">
                        ğŸ’¾ {{ 'GÃ¼ncelle' if course else 'Kaydet' }}
                    </button>
                    <a href="{{ url_for('admin.courses_list') }}" class="btn btn-secondary">
                        âŒ Ä°ptal
                    </a>
                </div>
            </form>
        </div>
    </div>
</section>
{% endblock %}