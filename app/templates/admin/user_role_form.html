{% extends 'base.html' %}

{% block title %}KullanÄ±cÄ± Rol DÃ¼zenle - Admin{% endblock %}

{% block content %}
<section class="admin-section">
    <div class="container">
        <!-- Sayfa BaÅŸlÄ±ÄŸÄ± -->
        <div class="page-header">
            <h1>ğŸ‘¤ KullanÄ±cÄ± Rol DÃ¼zenle</h1>
        </div>
        
        <!-- Form -->
        <div class="card">
            <form method="POST" class="form">
                <!-- KullanÄ±cÄ± Bilgileri (Salt Okunur) -->
                <div class="form-group">
                    <label>KullanÄ±cÄ± AdÄ±</label>
                    <input type="text" value="{{ user.username }}" class="form-control" disabled>
                </div>
                
                <div class="form-group">
                    <label>Ad Soyad</label>
                    <input type="text" value="{{ user.full_name }}" class="form-control" disabled>
                </div>
                
                <div class="form-group">
                    <label>E-posta</label>
                    <input type="text" value="{{ user.email }}" class="form-control" disabled>
                </div>
                
                <hr style="margin: 20px 0; border-color: var(--glass-border);">
                
                <!-- DÃ¼zenlenebilir Alanlar -->
                <div class="form-group">
                    <label for="role">Rol <span class="required">*</span></label>
                    <select id="role" name="role" class="form-control" required>
                        <option value="admin" {% if user.role == 'admin' %}selected{% endif %}>
                            ğŸ‘‘ Admin - TÃ¼m sistemi yÃ¶netir
                        </option>
                        <option value="bolum_yetkili" {% if user.role == 'bolum_yetkili' %}selected{% endif %}>
                            ğŸ›ï¸ BÃ¶lÃ¼m Yetkilisi - Kendi bÃ¶lÃ¼mÃ¼nÃ¼ yÃ¶netir
                        </option>
                        <option value="hoca" {% if user.role == 'hoca' %}selected{% endif %}>
                            ğŸ‘¨â€ğŸ« Hoca - Sadece gÃ¶rÃ¼ntÃ¼leme
                        </option>
                        <option value="ogrenci" {% if user.role == 'ogrenci' %}selected{% endif %}>
                            ğŸ“ Ã–ÄŸrenci - Sadece gÃ¶rÃ¼ntÃ¼leme
                        </option>
                    </select>
                    <small class="form-text">
                        <strong>Admin:</strong> TÃ¼m sistemi yÃ¶netir, planlama yapar<br>
                        <strong>BÃ¶lÃ¼m Yetkilisi:</strong> Kendi bÃ¶lÃ¼mÃ¼nÃ¼n ders ve hocalarÄ±nÄ± yÃ¶netir<br>
                        <strong>Hoca/Ã–ÄŸrenci:</strong> Sadece sÄ±nav programÄ±nÄ± gÃ¶rÃ¼ntÃ¼ler
                    </small>
                </div>
                
                <div class="form-group">
                    <label for="department_id">BÃ¶lÃ¼m</label>
                    <select id="department_id" name="department_id" class="form-control">
                        <option value="">-- BÃ¶lÃ¼m seÃ§in (opsiyonel) --</option>
                        {% for dept in departments %}
                        <option value="{{ dept.id }}" {% if user.department_id == dept.id %}selected{% endif %}>
                            {{ dept.name }}
                        </option>
                        {% endfor %}
                    </select>
                    <small class="form-text">
                        BÃ¶lÃ¼m Yetkilisi iÃ§in bÃ¶lÃ¼m seÃ§imi zorunludur.
                    </small>
                </div>
                
                <!-- Butonlar -->
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">ğŸ’¾ Kaydet</button>
                    <a href="{{ url_for('admin.users_list') }}" class="btn btn-secondary">Ä°ptal</a>
                </div>
            </form>
        </div>
        
        <!-- Geri Butonu -->
        <div class="back-link">
            <a href="{{ url_for('admin.users_list') }}">â† KullanÄ±cÄ± Listesine DÃ¶n</a>
        </div>
    </div>
</section>
{% endblock %}
